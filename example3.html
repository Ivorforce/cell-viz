<!DOCTYPE html>
<html>
    <head>
        <meta charset=utf-8>
        <title>Cell Regions</title>
        <style>
            body { margin: 0; }
            canvas { width: 100%; height: 100% }
        </style>
    </head>
    <body>

        <script src="https://code.jquery.com/jquery-3.1.0.slim.min.js"></script>
        <!-- <script src="dyson-bundle.js"></script> -->
        <script src="https://ci.numenta.com/browse/RES-NCV-54/artifact/shared/Webpacked-dyson-bundle.js/dyson-bundle.js"></script>
        <script>

            $(function() {

                // The Cells interface is how to update the visualization inside the canvas.
                var cells = new HtmCells(10, 10, 4);

                // The HtmCellVisualization object handles all interactions with the DOM.
                var cellviz = new SingleLayerVisualization(cells);

                cells.update(0, 0, 0, {color: 1});
                cells.update(cells.getX() - 1, cells.getY() - 1, cells.getZ() - 1, {color: 2});

                // Renders the canvas with empty cells into the DOM and canvas.
                cellviz.render();

                colorCellsRandomly(cells);

                setInterval(function() {
                    cells.peekUpdateAll(function(value, x, y, z, update) {
                        var compliment = 0xffffff ^ value.color;
                        update({color: compliment});
                    });
                    cellviz.redraw();
                }, 100);

                function randomHexColor() {
                    return Math.floor(Math.random()*16777215);
                }

                function colorCellsRandomly(myCells) {
                    for (var cx = 0; cx < cells.getX(); cx++) {
                        for (var cy = 0; cy < cells.getY(); cy++) {
                            for (var cz = 0; cz < cells.getZ(); cz++) {
                                myCells.update(
                                    cx, cy, cz,
                                    {color: randomHexColor()}
                                );
                            }
                        }
                    }
                }

            });

        </script>
    </body>
</html>
